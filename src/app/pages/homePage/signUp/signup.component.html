<div class="container mt-5">

  <h4 class="text-center">Register</h4>

  <form [formGroup]="registerForm" class="form mt-4" (submit)="register()">

    <div class="form-group">
      <input #usernameInput formControlName="username" class="form-control" placeholder="Username" autofocus>
      <ap-vmessage *ngIf="registerForm.get('username')?.errors?.required && registerForm.controls['username'].touched"
        text="Username is required"></ap-vmessage>
      <ap-vmessage *ngIf="registerForm.get('username')?.errors?.minlength" text="Minimum length is 3"></ap-vmessage>
      <ap-vmessage *ngIf="registerForm.get('username')?.errors?.maxlength" text="Maximum length is 20"></ap-vmessage>
      <ap-vmessage *ngIf="registerForm.get('username')?.errors?.pattern"
        text="Must be lower case and should not start with a number"></ap-vmessage>
    </div>

    <div class="form-group">
      <input formControlName="email" type="email" class="form-control" placeholder="Email">
      <ap-vmessage *ngIf="registerForm.get('email')?.errors?.required && registerForm.controls['email'].touched"
        text="Email is required"></ap-vmessage>
      <ap-vmessage *ngIf="registerForm.get('email')?.errors?.email" text="Invalid email"></ap-vmessage>
    </div>

    <div class="form-group">
      <input formControlName="password" type="password" class="form-control" placeholder="New password" #password>
      <ap-vmessage *ngIf="registerForm.get('password')?.errors?.required && registerForm.controls['password'].touched"
        text="Password is required"></ap-vmessage>
      <ap-vmessage *ngIf="registerForm.get('password')?.errors?.minlength" text="Minimum length is 6"></ap-vmessage>
      <ap-vmessage *ngIf="registerForm.get('password')?.errors?.maxlength" text="Maximum length is 20"></ap-vmessage>
    </div>

    <div class="form-group">
      <input formControlName="passwordRepeat" type="password" class="form-control" placeholder="Confirm your password"
        pattern="{{ password.value }}">
      <ap-vmessage
        *ngIf="registerForm.get('passwordRepeat')?.errors?.pattern  && registerForm.controls['passwordRepeat'].touched"
        text="The password doesn't match."></ap-vmessage>
    </div>

    <button [disabled]="registerForm.invalid" type="submit" class="btn btn-primary btn-block my-4">Register</button>

    <p class="text-center mt-2">Already a user? <a [routerLink]="['']">Sign In!</a></p>

  </form>
</div>
