<div class="container mt-5">
  <h4 class="text-center">Register</h4>

  <form [formGroup]="registerForm" class="form mt-4" (submit)="register()">
    <div class="form-group">
      <input
        #usernameInput
        formControlName="username"
        class="form-control"
        placeholder="Username"
      />
      <error-message
        *ngIf="
          registerForm.get('username')?.errors?.required &&
          registerForm.controls['username'].touched
        "
        text="Username is required"
      ></error-message>
      <error-message
        *ngIf="registerForm.get('username')?.errors?.minlength"
        text="Minimum length is 3"
      ></error-message>
      <error-message
        *ngIf="registerForm.get('username')?.errors?.maxlength"
        text="Maximum length is 20"
      ></error-message>
      <error-message
        *ngIf="registerForm.get('username')?.errors?.pattern"
        text="Must be lower case and should not start with a number"
      ></error-message>
    </div>

    <div class="form-group">
      <input
        formControlName="email"
        type="email"
        class="form-control"
        placeholder="Email"
      />
      <small
        id="emailHelp"
        class="form-text text-muted"
        >We'll never share your email with anyone.</small
      >
      <error-message
        *ngIf="
          registerForm.get('email')?.errors?.required &&
          registerForm.controls['email'].touched
        "
        text="Email is required"
      ></error-message>
      <error-message
        *ngIf="registerForm.get('email')?.errors?.email"
        text="Invalid email"
      ></error-message>
    </div>

    <div class="form-group">
      <input
        formControlName="password"
        type="password"
        class="form-control"
        placeholder="New password"
        #password
      />
      <error-message
        *ngIf="
          registerForm.get('password')?.errors?.required &&
          registerForm.controls['password'].touched
        "
        text="Password is required"
      ></error-message>
      <error-message
        *ngIf="registerForm.get('password')?.errors?.minlength"
        text="Minimum length is 6"
      ></error-message>
      <error-message
        *ngIf="registerForm.get('password')?.errors?.maxlength"
        text="Maximum length is 20"
      ></error-message>
    </div>

    <div class="form-group">
      <input
        formControlName="passwordRepeat"
        type="password"
        class="form-control"
        placeholder="Confirm your password"
        pattern="{{ password.value }}"
      />
      <error-message
        *ngIf="registerForm.get('passwordRepeat')?.errors?.pattern"
        text="The password doesn't match."
      ></error-message>
    </div>

    <button
      [disabled]="registerForm.invalid"
      type="submit"
      class="btn btn-primary btn-block my-4"
    >
      Register
    </button>

    <p class="text-center mt-2">
      Already a user? <a [routerLink]="['']">Sign In!</a>
    </p>
  </form>
</div>
